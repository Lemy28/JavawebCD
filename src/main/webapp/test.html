<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>testfile</title>
</head>

<body>
<div>===</div>
<div id="characterDiv">
</div>
						<center>
						<button onclick="showCharacters(1)">更多</button>
						</center>

</body>



<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
	
	
	<script  type="text/javascript">
	$(function(){
		$('button').click(function(){
			$(this).hide;
		})
		
	})
	
	</script>
	
	
	<script  type="text/javascript">
		
	    function showCharacters(page) {
	        $.ajax({
	            url: "./characters?page=" + page,
	            method: "GET",
	            dataType: "json"
	        }).done(function(result){
	        	updateCharacterTable(result.characters);
	        	hidebutton();
	        }).fail(function(xhr, status){
	            console.log(status);
	        });
	
	        console.log("button clicked!");
	    }
	
	    function updateCharacterTable(characters) {
	        var d = $("#characterDiv");
				d.empty;
				
	        for (var i=0; i<characters.length; i++) {
	            var c = characters[i];
	            var next = $("<div></div>");
	            next.append( "<span>年龄：" + c.age +"</span>");
	            next.append("<span>能力：" + c.ability + "</span>");
	            next.append("<span>来自：" + c.works  +"</span>");
	            next.append("<span>票数：" + c.votes  +"</span>");
	            d.append(next);
	        }
	
	    }
		
	    function hidebutton(){
	    	$('button').hide();
	    }
	    
	</script>

</html>